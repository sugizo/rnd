- pipeline: "build"
  trigger_mode: "ON_EVERY_PUSH"
  ref_name: "master"
  actions:
  - action: "Execute: harp compile"
    type: "BUILD"
    docker_image_name: "library/ubuntu"
    docker_image_tag: "latest"
    execute_commands:
    - "harp compile"
    - "rm -rf sugizo.github.io"
    - "git clone https://sugizo:${GITHUB_PASSWORD}@github.com/sugizo/sugizo.github.io.git"
    - "git config --global user.email 'steve.van.christie@gmail.com'"
    - "git config --global user.name 'sugizo'"
    - "cp -r public/* sugizo.github.io/"
    - "cd sugizo.github.io"
    - "git add --all"
    - "git commit -m 'From Buddy'"
    - "git push -u origin master"
    setup_commands:
    - "apt update"
    - "apt install -y npm nodejs-legacy git"
    - "npm list harp || npm install harp -g"
    trigger_condition: "ALWAYS"
