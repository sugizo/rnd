- pipeline: "build"
  trigger_mode: "ON_EVERY_PUSH"
  ref_name: "master"
  actions:
  - action: "Execute: cactus"
    type: "BUILD"
    docker_image_name: "library/python"
    docker_image_tag: "2.7"
    execute_commands:
    - "pip install -r requirements.txt"
    - "cactus build"
    - "rm -rf sugizo.github.io"
    - "git clone -b gh-pages https://sugizo:${GITHUB_PASSWORD}@github.com/sugizo/sugizo.github.io.git public || true"
    - "git config --global user.email 'steve.van.christie@gmail.com'"
    - "git config --global user.name 'sugizo'"
    - "git add --all"
    - "git commit -m 'From Buddy'"
    - "git push origin gh-pages --force"
    cached_dirs:
    - "/root/.cache/pip"
    trigger_condition: "ALWAYS"
