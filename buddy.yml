- pipeline: "build"
  trigger_mode: "ON_EVERY_PUSH"
  ref_name: "master"
  actions:
  - action: "Execute: jekyll"
    type: "BUILD"
    working_directory: "/srv/jekyll"
    docker_image_name: "jekyll/jekyll"
    docker_image_tag: "3.4"
    execute_commands:
    - "chown jekyll:jekyll $WORKING_DIR"
    - "jekyll build"
    - "rm -rf sugizo.github.io"
    - "git clone https://sugizo:${GITHUB_PASSWORD}@github.com/sugizo/sugizo.github.io.git"
    - "git config --global user.email 'steve.van.christie@gmail.com'"
    - "git config --global user.name 'sugizo'"
    - "cp -r _site/* sugizo.github.io/"
    - "cd sugizo.github.io"
    - "git add --all"
    - "git commit -m 'From Buddy'"
    - "git push -u origin master"
    trigger_condition: "ALWAYS"
