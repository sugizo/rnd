- pipeline: "build"
  trigger_mode: "ON_EVERY_PUSH"
  ref_name: "master"
  actions:
  - action: "Execute: cactus"
    type: "BUILD"
    docker_image_name: "library/python"
    docker_image_tag: "2.7"
    execute_commands:
    - "pip install -r requirements.txt"
    - "cactus build"
    - "git config --global user.email 'steve.van.christie@gmail.com'"
    - "git config --global user.name 'sugizo'"
    - "git config --global push.default simple"
    - "rm -rf sugizo.github.io"
    - "git clone https://github.com/sugizo/sugizo.github.io"
    - "cp -r .build/* sugizo.github.io/"
    - "cd sugizo.github.io"
    - "git remote set-url origin git@github.com:sugizo/sugizo.github.io.git"
    - "git add --all"
    - "git commit -m 'From Buddy'"
    - "git push -u origin master"
    cached_dirs:
    - "/root/.cache/pip"
    trigger_condition: "ALWAYS"
